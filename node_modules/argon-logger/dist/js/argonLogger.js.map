{"version":3,"file":"argonLogger.js","sources":["../../src/index.js"],"sourcesContent":["/**\n * Tests if current host name matches allowed hostnames\n * @param {string} hostname Current hostname\n * @param {object} config Configuration\n */\nfunction matchesURL(hostname, config) {\n    const allowedHostnames = Array.isArray(config.allowedHostnames) ? config.allowedHostnames : [];\n    if (allowedHostnames.length === 0) {\n        return true;\n    }\n    return !!allowedHostnames.filter(URL => (URL.indexOf(hostname) > -1)).length;\n}\n\n/**\n * Checks if given port is allowed\n * @param {string} port Current port\n * @param {object} config Configuration\n */\nfunction matchesPort(port, config) {\n    let allowedPorts = Array.isArray(config.allowedPorts) ? config.allowedPorts : [];\n    allowedPorts = allowedPorts.map(port => (`${port}`).trim());\n    if (allowedPorts.length === 0) {\n        return true;\n    }\n    return (allowedPorts.indexOf(port) > -1);\n}\n\n/**\n * Returns a map of query string key value pairs\n * @param {string} queryString Current query string\n */\nfunction getAllParams(queryString) {\n    queryString = queryString.substring(queryString.charAt(0) === '?' ? 1 : 0);\n    return queryString.split('&').map((pairs) => {\n        const [key, value] = pairs.split('=').map(part => decodeURIComponent(part).trim());\n        return { key, value };\n    });\n}\n\n/**\n * Alias for hasOwnProperty\n * @param {object} object Target object\n * @param {string} key Key name\n */\nfunction hasOwn(object, key) {\n    return Object.prototype.hasOwnProperty.call(object, key);\n}\n\n/**\n * Tests if any existing query parameter matches configuration\n * @param {string} queryString Query string\n * @param {object} config Configuration\n */\nfunction matchesQueryParam(queryString, config) {\n    const allowedQueryStringParameters = Array.isArray(config.allowedQueryStringParameters) ? config.allowedQueryStringParameters : [];\n    const allParams = getAllParams(queryString);\n    const allowedParams = [];\n    allowedQueryStringParameters.forEach(param => {\n        if (typeof param === 'string') {\n            const [key, value = true] = param.split('=');\n            allowedParams.push({ key, value });\n        } else if (\n            param\n            && typeof param === 'object'\n            && hasOwn(param, 'key')\n            && hasOwn(param, 'value') // Schema check\n        ) {\n            param.key = param.key.trim();\n            param.value = (`${param.value}`).trim();\n            allowedParams.push(param);\n        }\n    });\n    let result = false;\n    allowedParams.forEach(param => {\n        const currentResult = !!allParams.filter(queryParam => (\n            param.key === queryParam.key\n            && (param.value === queryParam.value || param.value === true)\n        )).length;\n        result = result || currentResult;\n    });\n    return result;\n}\n\n/**\n * Returns true if logging should allowed\n */\nfunction isLoggingAllowed() {\n    if (typeof this.config.test === 'function') {\n        return this.config.test();\n    }\n    return (\n        (typeof console !== 'undefined')\n        && (\n            (\n                matchesURL(this.location.hostname, this.config)\n                && matchesPort(this.location.port, this.config)\n            )\n            || matchesQueryParam(this.location.search, this.config)\n        )\n        && !this.config.disable\n    );\n}\n\n/**\n * Logger class\n * @class\n */\nexport default class Logger {\n    constructor(config = {}) {\n        this.config = Object.freeze({\n            allowedHostnames: ['localhost', '127.0.0.1', '0.0.0.0'],\n            disable: false,\n            allowedQueryStringParameters: ['debug'],\n            allowedPorts: [],\n            ...config\n        });\n        this.location = typeof window === 'undefined' ? {} : window.location;\n        this.URL = this.location.href;\n    }\n    isLoggingAllowed() {\n        return isLoggingAllowed.apply(this);\n    }\n    log() {\n        if (this.isLoggingAllowed() && console.log) {\n            return console.log(...arguments);\n        }\n    }\n    warn() {\n        if (this.isLoggingAllowed() && console.warn) {\n            console.warn(...arguments);\n        }\n    }\n    debug() {\n        if (this.isLoggingAllowed() && console.debug) {\n            console.debug(...arguments);\n        }\n    }\n    error() {\n        if (this.isLoggingAllowed() && console.error) {\n            console.error(...arguments);\n        }\n    }\n    info() {\n        if (this.isLoggingAllowed() && console.info) {\n            console.info(...arguments);\n        }\n    }\n    dir() {\n        if (this.isLoggingAllowed() && console.dir) {\n            console.dir(...arguments);\n        }\n    }\n    dirxml() {\n        if (this.isLoggingAllowed() && console.dirxml) {\n            console.dirxml(...arguments);\n        }\n    }\n    table() {\n        if (this.isLoggingAllowed() && console.table) {\n            console.table(...arguments);\n        }\n    }\n    trace() {\n        if (this.isLoggingAllowed() && console.trace) {\n            console.trace(...arguments);\n        }\n    }\n    group() {\n        if (this.isLoggingAllowed() && console.group) {\n            console.group(...arguments);\n        }\n    }\n    groupCollapsed() {\n        if (this.isLoggingAllowed() && console.groupCollapsed) {\n            console.groupCollapsed(...arguments);\n        }\n    }\n    groupEnd() {\n        if (this.isLoggingAllowed() && console.groupEnd) {\n            console.groupEnd(...arguments);\n        }\n    }\n    clear() {\n        if (this.isLoggingAllowed() && console.clear) {\n            console.clear(...arguments);\n        }\n    }\n    count() {\n        if (this.isLoggingAllowed() && console.count) {\n            console.count(...arguments);\n        }\n    }\n    countReset() {\n        if (this.isLoggingAllowed() && console.countReset) {\n            console.countReset(...arguments);\n        }\n    }\n    assert() {\n        if (this.isLoggingAllowed() && console.assert) {\n            console.assert(...arguments);\n        }\n    }\n    profile() {\n        if (this.isLoggingAllowed() && console.profile) {\n            console.profile(...arguments);\n        }\n    }\n    profileEnd() {\n        if (this.isLoggingAllowed() && console.profileEnd) {\n            console.profileEnd(...arguments);\n        }\n    }\n    time() {\n        if (this.isLoggingAllowed() && console.time) {\n            console.time(...arguments);\n        }\n    }\n    timeLog() {\n        if (this.isLoggingAllowed() && console.timeLog) {\n            console.timeLog(...arguments);\n        }\n    }\n    timeStamp() {\n        if (this.isLoggingAllowed() && console.timeStamp) {\n            console.timeStamp(...arguments);\n        }\n    }\n    context() {\n        if (this.isLoggingAllowed() && console.context) {\n            console.context(...arguments);\n        }\n    }\n}"],"names":["matchesURL","hostname","config","allowedHostnames","Array","isArray","length","filter","URL","indexOf","matchesPort","port","allowedPorts","map","trim","getAllParams","queryString","substring","charAt","split","pairs","part","decodeURIComponent","key","value","hasOwn","object","Object","prototype","hasOwnProperty","call","matchesQueryParam","allowedQueryStringParameters","allParams","allowedParams","forEach","param","push","result","currentResult","queryParam","isLoggingAllowed","test","console","location","search","disable","Logger","freeze","window","href","apply","log","arguments","warn","debug","error","info","dir","dirxml","table","trace","group","groupCollapsed","groupEnd","clear","count","countReset","assert","profile","profileEnd","time","timeLog","timeStamp","context"],"mappings":"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"}